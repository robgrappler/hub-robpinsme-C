---
interface Props {
    url: string;
    poster?: string;
}

const { url, poster } = Astro.props;

// Ensure consistent parameters for the trailer experience
const embedUrl = new URL(url);
if (!embedUrl.searchParams.has("autoplay"))
    embedUrl.searchParams.set("autoplay", "true");
if (!embedUrl.searchParams.has("loop"))
    embedUrl.searchParams.set("loop", "true");
if (!embedUrl.searchParams.has("muted"))
    embedUrl.searchParams.set("muted", "true");
if (!embedUrl.searchParams.has("preload"))
    embedUrl.searchParams.set("preload", "true");
if (!embedUrl.searchParams.has("responsive"))
    embedUrl.searchParams.set("responsive", "true");
---

<div class="match-db-video">
    <iframe
        src={embedUrl.toString()}
        loading="lazy"
        style="border: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%;"
        allow="accelerometer; gyroscope; autoplay; encrypted-media; picture-in-picture;"
        allowfullscreen="true"
    >
    </iframe>
</div>
